<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Arago">
<meta property="og:type" content="article">
<meta property="og:title" content="Arago">
<meta property="og:url" content="http://yoursite.com/2018/07/28/Arago/index.html">
<meta property="og:site_name" content="Semiyd&#39;s Blog">
<meta property="og:description" content="Arago">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-07-28T06:58:56.298Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Arago">
<meta name="twitter:description" content="Arago">






  <link rel="canonical" href="http://yoursite.com/2018/07/28/Arago/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Arago | Semiyd's Blog</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Semiyd's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/28/Arago/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Semiyd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Semiyd's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Arago
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-07-28 14:37:32 / Modified: 14:58:56" itemprop="dateCreated datePublished" datetime="2018-07-28T14:37:32+08:00">2018-07-28</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/Build/" itemprop="url" rel="index"><span itemprop="name">Build</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><center><strong>Arago</strong></center><br><a id="more"></a><br>ti公司专门制作的linux distribution。<br>主页：<br><a href="http://arago-project.org/wiki/index.php/Main_Page" target="_blank" rel="noopener">http://arago-project.org/wiki/index.php/Main_Page</a></p>
<p>基于OpenEmbedded和yocto。基本上可以理解是和yocto平行的编译框架。<br>框架方面基于openembedded<br>而编译方面，基于yocto的poku build system的方式编译</p>
<p>arago有什么好处?<br>    1.基于git下载最新源码，能实时得到ti最新的更新，减少bug<br>    2.ti经过完整的测试<br>    3.ti针对不同的功能，有现成的recipe也就是方案。增加新功能的时候，无需自己一点一点摸索。</p>
<p>opkg update<br>opke install xxx</p>
<p>现在最新的arago被称为Meta-arago</p>
<p>现在的arago基于oe-core（OpenEmbedded-core）</p>
<p>arago有两个基本概念：</p>
<p>Recipe<br>    如其名，是Meta-data，里面包含获取，编译，打包某个特定软件的指令集<br>    文件名以bb结尾。<br>    这样做的好处是。ti做了大量的工作。比如要添加某个新功能。只需添加一个bb，也就是recipe。<br>    就可以一并解决所有的依赖性，编译，配置的工作。因为ti已经做了。<br>    比如。要添加蓝牙功能。<br>    只要添加packagegroup-arago-tisdk-connectivity.bb<br>    要添加图形加速功能。<br>    只要添加packagegroup-arago-tisdk-graphics.bb</p>
<p>Layer<br>    一组recipe还有一些别的有用的配置文件的集合就是layer。<br>    有4个layers.可以理解为build-blocks。也就是4层，由下到上。</p>
<pre><code>meta-arago        (包含针对meta-arago的recipe,包含各个apps)
meta-ti            (BSP，包含针对uboot kernel和别的ti软件的recipe)
meta-openembedded    (一些不适合放在oe-core里面的recipe，但其实会被很多其他layer用到的recipe，就放在这里)    属于openembedded的内容
oe-core            (open embedded核心。包含大量的基础recipe，用于openembedded framework)        属于openembedded的内容。相应的，还有更早期的oe-classic层

这个分层结构，可以在am335x的ti sdk编译的目录，也就是~/tisdk/source/下面可以看出来。

layer文件的修改
configs/processor-sdk/processor-sdk-XX.XX.XX.XX-config.txt  Configuration to recreate Processor SDK version XX.XX.XX.XX. 

涉及bblayers.conf
    conf/layer.conf
</code></pre><p>在执行了<br>$ git clone git://arago-project.org/git/projects/oe-layersetup.git tisdk<br>$ cd tisdk<br>$ ./oe-layertool-setup.sh -f configs/processor-sdk/processor-sdk-03.02.00.05-config.txt<br>以后。我们就得到了arago的基本文件框架（通过git clone）<br>build<br>    conf<br>        local.conf<br>        setenv<br>然后编译：<br>$ . conf/setenv<br>$ export PATH=$HOME/gcc-linaro-5.3-2016.02-x86_64_arm-linux-gnueabihf/bin:$PATH<br>$ MACHINE=am57xx-evm bitbake arago-core-tisdk-image</p>
<h1 id="编译以后，会产生一个文件夹，叫arago-deploy，编好的东西都在里面"><a href="#编译以后，会产生一个文件夹，叫arago-deploy，编好的东西都在里面" class="headerlink" title="编译以后，会产生一个文件夹，叫arago-deploy，编好的东西都在里面"></a>编译以后，会产生一个文件夹，叫arago-deploy，编好的东西都在里面</h1><p>如何修改已有的recipe：<br>举例：<br>vi arago/recipe/tasks/task-arago-demo.bb<br>修改PR，增加pacakge revision number的大小，因为修改了recipe了<br>增加nano编辑器<br>    在ARAGO_UTILS = “\这一组<br>    增加一行<br>    nano \<br>重新bitbake编译</p>
<h1 id="此时，会自动编译nano，并自动打包到rootfs里面去。"><a href="#此时，会自动编译nano，并自动打包到rootfs里面去。" class="headerlink" title="此时，会自动编译nano，并自动打包到rootfs里面去。"></a>此时，会自动编译nano，并自动打包到rootfs里面去。</h1><p>如何建立一个新的layer？<br>Create a new directory (traditionally meta-<something>)<br>Create a conf/layer.conf. You can simply copy meta-oe’s one and just change “openembedded-layer” to something appropriate for your layer; you may also want to set the priority as appropriate.<br>Depending on the type of layer, add the content:<br>    If the layer is adding support for a machine, add the machine configuration in conf/machine/<br>    If the layer is adding distro policy, add the distro configuration in conf/distro/<br>    If the layer introduces new recipes, put the recipes you need in recipes-* subdirectories of the layer directory. If you are bringing recipes across from OE-Classic see Migrating metadata to OE-Core.<br>注意事项：<br>Best practices<br>To aid maintainability, the following recommendations are made for creating new layers:<br>Avoid “overlaying” entire recipes from other layers in your configuration (i.e. copying the entire recipe into your layer and modifying it). Use .bbappend files to override the parts of the recipe you need to modify.<br>Avoid duplicating include files - use .bbappends for each recipe that uses the inc file, or if you’re introducing a new recipe that requires it,<br>use the full path to refer to the original (e.g. require recipes-core/somepackage/somefile.inc instead of require somefile.inc).<br>If you’re finding you have to overlay the inc file it may indicate a deficiency in the inc file in the layer it originally belongs to, which should be addressed instead.<br>An example here would be the way Qt 4 database support plugins are configured - OE-core doesn’t have MySQL or PostgreSQL,<br>however meta-oe does, so distro layers can use .bbappends for qt4-x11-free and/or qt4-embedded to modify a variable QT_SQL_DRIVER_FLAGS to enable the appropriate plugins. </something></p>
<h1 id="This-variable-was-added-to-qt4-inc-in-OE-core-specifically-to-make-it-easier-to-enable-support-for-database-engines-not-available-in-OE-Core"><a href="#This-variable-was-added-to-qt4-inc-in-OE-core-specifically-to-make-it-easier-to-enable-support-for-database-engines-not-available-in-OE-Core" class="headerlink" title="This variable was added to qt4.inc in OE-core specifically to make it easier to enable support for database engines not available in OE-Core."></a>This variable was added to qt4.inc in OE-core specifically to make it easier to enable support for database engines not available in OE-Core.</h1><p>如何添加一个网上下载的layer？<br>1.从网上比如yocto/arago的官网上，下载某个layer的tar包<br>2.解压压缩包。在meta-xxx/conf下，能看到layer.conf<br>3.在build/conf/bblayer.conf里面，加入刚刚新下载的layer的目录(绝对路径)，也就是meta-xxx/<br>4.在build/conf/local.conf里面，加入合适的MACHINE名字<br>5.</p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/28/系统调用API/" rel="next" title="系统调用API">
                <i class="fa fa-chevron-left"></i> 系统调用API
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/28/bitbake/" rel="prev" title="bitbake">
                bitbake <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Semiyd</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">150</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">71</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#编译以后，会产生一个文件夹，叫arago-deploy，编好的东西都在里面"><span class="nav-number">1.</span> <span class="nav-text">编译以后，会产生一个文件夹，叫arago-deploy，编好的东西都在里面</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#此时，会自动编译nano，并自动打包到rootfs里面去。"><span class="nav-number">2.</span> <span class="nav-text">此时，会自动编译nano，并自动打包到rootfs里面去。</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-variable-was-added-to-qt4-inc-in-OE-core-specifically-to-make-it-easier-to-enable-support-for-database-engines-not-available-in-OE-Core"><span class="nav-number">3.</span> <span class="nav-text">This variable was added to qt4.inc in OE-core specifically to make it easier to enable support for database engines not available in OE-Core.</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Semiyd</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
