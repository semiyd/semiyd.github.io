<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="dapm笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="笔记dapm">
<meta property="og:url" content="http://yoursite.com/2020/07/12/笔记dapm/index.html">
<meta property="og:site_name" content="Semiyd&#39;s Blog">
<meta property="og:description" content="dapm笔记">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2020-07-12T13:07:11.947Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="笔记dapm">
<meta name="twitter:description" content="dapm笔记">






  <link rel="canonical" href="http://yoursite.com/2020/07/12/笔记dapm/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>笔记dapm | Semiyd's Blog</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Semiyd's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/12/笔记dapm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Semiyd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Semiyd's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">笔记dapm
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-07-12 21:06:50 / Modified: 21:07:11" itemprop="dateCreated datePublished" datetime="2020-07-12T21:06:50+08:00">2020-07-12</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/Kernel/" itemprop="url" rel="index"><span itemprop="name">Kernel</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/Kernel/驱动/" itemprop="url" rel="index"><span itemprop="name">驱动</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/Kernel/驱动/ALSA/" itemprop="url" rel="index"><span itemprop="name">ALSA</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><center><strong>dapm笔记</strong></center><br><a id="more"></a></p>
<p>利用kcontrol，我们可以完成对音频系统中的mixer，mux，音量控制，音效控制，以及各种开关量的控制，通过对各种kcontrol的控制，使得音频硬件能够按照我们预想的结果进行工作。<br>同时我们可以看到，kcontrol还是有以下几点不足：</p>
<p>只能描述自身，无法描述各个kcontrol之间的连接关系；<br>没有相应的电源管理机制；<br>没有相应的时间处理机制来响应播放、停止、上电、下电等音频事件；<br>为了防止pop-pop声，需要用户程序关注各个kcontrol上电和下电的顺序；<br>当一个音频路径不再有效时，不能自动关闭该路径上的所有的kcontrol；</p>
<p>DAPM框架正是为了要解决以上这些问题而诞生的</p>
<p>=============================================DAPM的基本单元：widget=======================================================<br>所谓widget，是指音频系统中的某个部件，比如mixer，mux，输入输出引脚，电源供应器<br>甚至可以定义虚拟widget，例如playback stream widget<br>widget把kcontrol和动态电源管理进行了有机的结合，同时还具备音频路径的连结功能，一个widget可以与它相邻的widget有某种动态的连结关系。</p>
<p>widget和kcontrol到底有何异同？<br>1.widget是包含kcontrol的，kcontrol是子集。但widget还能表示一些抽象的概念，例如输入输出脚，音频流。<br>2.widget和kcontrol重合的部分，即表示控件的时候，widget除了有kcontrol已有的功能，还能针对电源状态做管理，这就是区别。<br>例如：SOC_DAPM_SINGLE和SOC_SINGLE这两者的对比。<br>3.初始化流程的差异：<br>a. 对于普通的snd_kcontrol:<br>snd_soc_add_controls : snd_kcontrol_new构造出snd_kcontrol, 放入card-&gt;controls链表<br>b. 对于DAPM的snd_kcontrol，也就是widget, 分2步:<br>    1 snd_soc_dapm_new_controls  // 把widget放入card-&gt;widgets链表<br>    2 在注册machine驱动时, 导致如下调用:<br>            soc_probe_dai_link &gt; soc_post_component_init &gt; snd_soc_dapm_new_widgets<br>        而snd_soc_dapm_new_widgets:<br>           对于每一个widget, 设置它的power_check函数(用来判断该widget是否应该上电)<br>           对于mixer widget, 取出其中的snd_kcontrol_new构造出snd_kcontrol, 放入card-&gt;controls链表<br>           对于mux widget,它只有一个snd_kcontrol_new, 构造出snd_kcontrol, 放入card-&gt;controls链表</p>
<p>widget的结构体定义如下：<br>include/sound/soc-dapm.h<br>/<em> dapm widget </em>/<br>struct snd_soc_dapm_widget {<br>    enum snd_soc_dapm_type id;<br>    const char <em>name;        /</em> widget name <em>/<br>    const char </em>sname;    /<em> stream name </em>/<br>    struct list_head list;<br>    struct snd_soc_dapm_context *dapm;</p>
<pre><code>void *priv;                /* widget specific data */
struct regulator *regulator;        /* attached regulator */
struct pinctrl *pinctrl;        /* attached pinctrl */

/* dapm control */
int reg;                /* negative reg = no direct dapm */
unsigned char shift;            /* bits to shift */
unsigned int mask;            /* non-shifted mask */
unsigned int on_val;            /* on state value */
unsigned int off_val;            /* off state value */
unsigned char power:1;            /* block power status */
unsigned char active:1;            /* active stream on DAC, ADC&apos;s */
unsigned char connected:1;        /* connected codec pin */
unsigned char new:1;            /* cnew complete */
unsigned char force:1;            /* force state */
unsigned char ignore_suspend:1;         /* kept enabled over suspend */
unsigned char new_power:1;        /* power from this run */
unsigned char power_checked:1;        /* power checked this run */
unsigned char is_supply:1;        /* Widget is a supply type widget */
unsigned char is_ep:2;            /* Widget is a endpoint type widget */
int subseq;                /* sort within widget type */

int (*power_check)(struct snd_soc_dapm_widget *w);

/* external events */
unsigned short event_flags;        /* flags to specify event types */
int (*event)(struct snd_soc_dapm_widget*, struct snd_kcontrol *, int);

/* kcontrols that relate to this widget */
int num_kcontrols;
const struct snd_kcontrol_new *kcontrol_news;
struct snd_kcontrol **kcontrols;
struct snd_soc_dobj dobj;

/* widget input and output edges */
struct list_head edges[2];

/* used during DAPM updates */
struct list_head work_list;
struct list_head power_list;
struct list_head dirty;
int endpoints[2];

struct clk *clk;

int channel;
</code></pre><p>};</p>
<p>widget的类型定义：<br>/<em> dapm widget types </em>/<br>enum snd_soc_dapm_type {<br>    snd_soc_dapm_input = 0,        /<em> input pin </em>/<br>    snd_soc_dapm_output,        /<em> output pin </em>/<br>    snd_soc_dapm_mux,            /<em> selects 1 analog signal from many inputs </em>/<br>    snd_soc_dapm_demux,            /<em> connects the input to one of multiple outputs </em>/<br>    snd_soc_dapm_mixer,            /<em> mixes several analog signals together </em>/<br>    snd_soc_dapm_mixer_named_ctl,        /<em> mixer with named controls </em>/<br>    snd_soc_dapm_pga,            /<em> programmable gain/attenuation (volume) </em>/<br>    snd_soc_dapm_out_drv,            /<em> output driver </em>/<br>    snd_soc_dapm_adc,            /<em> analog to digital converter </em>/<br>    snd_soc_dapm_dac,            /<em> digital to analog converter </em>/<br>    snd_soc_dapm_micbias,        /<em> microphone bias (power) - DEPRECATED: use snd_soc_dapm_supply </em>/<br>    snd_soc_dapm_mic,            /<em> microphone </em>/<br>    snd_soc_dapm_hp,            /<em> headphones </em>/<br>    snd_soc_dapm_spk,            /<em> speaker </em>/<br>    snd_soc_dapm_line,            /<em> line input/output </em>/<br>    snd_soc_dapm_switch,        /<em> analog switch </em>/<br>    snd_soc_dapm_vmid,            /<em> codec bias/vmid - to minimise pops </em>/<br>    snd_soc_dapm_pre,            /<em> machine specific pre widget - exec first </em>/<br>    snd_soc_dapm_post,            /<em> machine specific post widget - exec last </em>/<br>    snd_soc_dapm_supply,        /<em> power/clock supply </em>/<br>    snd_soc_dapm_pinctrl,        /<em> pinctrl </em>/<br>    snd_soc_dapm_regulator_supply,    /<em> external regulator </em>/<br>    snd_soc_dapm_clock_supply,    /<em> external clock </em>/<br>    snd_soc_dapm_aif_in,        /<em> audio interface input </em>/<br>    snd_soc_dapm_aif_out,        /<em> audio interface output </em>/<br>    snd_soc_dapm_siggen,        /<em> signal generator </em>/<br>    snd_soc_dapm_sink,<br>    snd_soc_dapm_dai_in,        /<em> link to DAI structure </em>/<br>    snd_soc_dapm_dai_out,<br>    snd_soc_dapm_dai_link,        /<em> link between two DAI structures </em>/<br>    snd_soc_dapm_kcontrol,        /<em> Auto-disabled kcontrol </em>/<br>    snd_soc_dapm_buffer,        /<em> DSP/CODEC internal buffer </em>/<br>    snd_soc_dapm_scheduler,        /<em> DSP/CODEC internal scheduler </em>/<br>    snd_soc_dapm_effect,        /<em> DSP/CODEC effect component </em>/<br>    snd_soc_dapm_src,        /<em> DSP/CODEC SRC component </em>/<br>    snd_soc_dapm_asrc,        /<em> DSP/CODEC ASRC component </em>/<br>    snd_soc_dapm_encoder,        /<em> FW/SW audio encoder component </em>/<br>    snd_soc_dapm_decoder,        /<em> FW/SW audio decoder component </em>/</p>
<pre><code>/* Don&apos;t edit below this line */
SND_SOC_DAPM_TYPE_COUNT
</code></pre><p>};<br>从上面的类型就可以看到，其实widget种类繁多。除了典型的mix,mux外， 还代表链接snd_soc_dapm_dai_link，或者代表一个设备snd_soc_dapm_spk，等等。<br>上面的一些widget类型，会体现在widget定义的id成员中。例如：</p>
<p>#define SND_SOC_DAPM_ADC(wname, stname, wreg, wshift, winvert) \<br>{    .id = snd_soc_dapm_adc, .name = wname, .sname = stname, \<br>    SND_SOC_DAPM_INIT_REG_VAL(wreg, wshift, winvert), }<br>可以看到这个类型就是snd_soc_dapm_adc。<br>比较常用的widget还有：<br>SND_SOC_DAPM_ADC/SND_SOC_DAPM_DAC<br>SND_SOC_DAPM_OUTPUT/SND_SOC_DAPM_INPUT</p>
<p>widget之间的连接:<br>描述widget之间的连接关系，用snd_soc_dapm_path结构体。<br>啥叫连接关系？之前已经提到，一个widget是有输入和输出的，而且widget之间是可以动态地进行连接的。<br>把一个widget的输出端和另一个widget的输入端连接在一起，就形成了widget之间的连接。<br>所以这个snd_soc_dapm_path结构体到底是啥？说白了就是一根电线。<br>当widget之间发生连接关系时，snd_soc_dapm_path作为连接者，它的source字段会指向该连接的起始端widget，而它的sink字段会指向该连接的到达端widget<br>/<em> dapm audio path between two widgets </em>/<br>struct snd_soc_dapm_path {<br>    const char *name;</p>
<pre><code>/*
 * source (input) and sink (output) widgets
 * The union is for convience, since it is a lot nicer to type
 * p-&gt;source, rather than p-&gt;node[SND_SOC_DAPM_DIR_IN]
 */
union {
    struct {
        struct snd_soc_dapm_widget *source;
        struct snd_soc_dapm_widget *sink;
    };
    struct snd_soc_dapm_widget *node[2];
};

/* status */
u32 connect:1;    /* source and sink widgets are connected */
u32 walking:1;  /* path is in the process of being walked */
u32 weak:1;    /* path ignored for power management */
u32 is_supply:1;    /* At least one of the connected widgets is a supply */

int (*connected)(struct snd_soc_dapm_widget *source,
         struct snd_soc_dapm_widget *sink);

struct list_head list_node[2];
struct list_head list_kcontrol;
struct list_head list;
</code></pre><p>};<br>说到这，会涉及到一个相似的概念，snd_soc_dapm_route。<br>=============================================DAPM的基本单元：route=======================================================<br>一个路径的连接至少包含以下几个元素：起始端snd_soc_dapm_widget，跳线snd_soc_dapm_path ，到达端snd_soc_dapm_widget，<br>在DAPM中，用snd_soc_dapm_route结构来描述这样一个连接关系：<br>/*</p>
<ul>
<li>DAPM audio route definition.<br>*</li>
<li>Defines an audio route originating at source via control and finishing</li>
<li><p>at sink.<br><em>/<br>struct snd_soc_dapm_route {<br> const char </em>sink;<br> const char <em>control;<br> const char </em>source;</p>
<p> /<em> Note: currently only supported for links where source is a supply </em>/<br> int (<em>connected)(struct snd_soc_dapm_widget </em>source,</p>
<pre><code>struct snd_soc_dapm_widget *sink);
</code></pre><p> struct snd_soc_dobj dobj;<br>};<br>sink指向到达端widget的名字字符串，source指向起始端widget的名字字符串，control指向负责控制该连接所对应的kcontrol名字字符串，<br>connected回调则定义了上一节所提到的自定义连接检查回调函数。<br>该结构的意义很明显就是：source通过一个kcontrol，和sink连接在一起，现在是否处于连接状态，请调用connected回调函数检查。<br>所有定义好的route,通过snd_soc_dapm_add_route()注册到系统中，在snd_soc_dapm_add_route()的结尾，会调用snd_soc_dapm_add_path()<br>动态地生成所需要的snd_soc_dapm_path结构。<br>所以逻辑上的关系是：<br>先有snd_soc_dapm_route -&gt; 再自动生成snd_soc_dapm_path<br>所以snd_soc_dapm_route一般是codec驱动中，自己定义的。<br>而snd_soc_dapm_path不用特别去定义，由DAPM代码搞定。<br>所以route表示连接。path也表示连接。但作为写代码的人，只顾着定义route就完事了。</p>
</li>
</ul>
<p>=============================================DAPM的实战操作：定义widget和route=======================================================<br>和普通的kcontrol一样，DAPM框架为我们提供了大量的辅助宏用来定义各种各样的widget控件<br>这里还是以wm9713.c的定义为例，此处用代码执行的顺序去分析，这样逻辑比较顺。<br>首先，在snd_soc_component_driver中，定义了dapm_widgets和dapm_routes这两个结构体数组成员。<br>static const struct snd_soc_component_driver soc_component_dev_wm9713 = {<br>…<br>    .dapm_widgets        = wm9713_dapm_widgets,<br>    .dapm_routes        = wm9713_audio_map,<br>…<br>};<br>然后看下routes的定义：(顺序：sink-control-source)<br>static const struct snd_soc_dapm_route wm9713_audio_map[] = {<br>    /<em> left HP mixer </em>/<br>    {“Left HP Mixer”, “Beep Playback Switch”,    “PCBEEP”},<br>    {“Left HP Mixer”, “Voice Playback Switch”,   “Voice DAC”},<br>    {“Left HP Mixer”, “Aux Playback Switch”,     “Aux DAC”},<br>    {“Left HP Mixer”, “Bypass Playback Switch”,  “Left Line In”},<br>    {“Left HP Mixer”, “PCM Playback Switch”,     “Left DAC”},<br>    {“Left HP Mixer”, “MonoIn Playback Switch”,  “Mono In”},<br>    {“Left HP Mixer”, NULL,  “Capture Headphone Mux”},</p>
<pre><code>/* right HP mixer */
{&quot;Right HP Mixer&quot;, &quot;Beep Playback Switch&quot;,    &quot;PCBEEP&quot;},
{&quot;Right HP Mixer&quot;, &quot;Voice Playback Switch&quot;,   &quot;Voice DAC&quot;},
{&quot;Right HP Mixer&quot;, &quot;Aux Playback Switch&quot;,     &quot;Aux DAC&quot;},
{&quot;Right HP Mixer&quot;, &quot;Bypass Playback Switch&quot;,  &quot;Right Line In&quot;},
{&quot;Right HP Mixer&quot;, &quot;PCM Playback Switch&quot;,     &quot;Right DAC&quot;},
{&quot;Right HP Mixer&quot;, &quot;MonoIn Playback Switch&quot;,  &quot;Mono In&quot;},
{&quot;Right HP Mixer&quot;, NULL,  &quot;Capture Headphone Mux&quot;},

/* virtual mixer - mixes left &amp; right channels for spk and mono */
{&quot;AC97 Mixer&quot;, NULL, &quot;Left DAC&quot;},
{&quot;AC97 Mixer&quot;, NULL, &quot;Right DAC&quot;},
{&quot;Line Mixer&quot;, NULL, &quot;Right Line In&quot;},
{&quot;Line Mixer&quot;, NULL, &quot;Left Line In&quot;},
{&quot;HP Mixer&quot;, NULL, &quot;Left HP Mixer&quot;},
{&quot;HP Mixer&quot;, NULL, &quot;Right HP Mixer&quot;},
{&quot;Capture Mixer&quot;, NULL, &quot;Left Capture Source&quot;},
{&quot;Capture Mixer&quot;, NULL, &quot;Right Capture Source&quot;},

/* speaker mixer */
{&quot;Speaker Mixer&quot;, &quot;Beep Playback Switch&quot;,    &quot;PCBEEP&quot;},
{&quot;Speaker Mixer&quot;, &quot;Voice Playback Switch&quot;,   &quot;Voice DAC&quot;},
{&quot;Speaker Mixer&quot;, &quot;Aux Playback Switch&quot;,     &quot;Aux DAC&quot;},
{&quot;Speaker Mixer&quot;, &quot;Bypass Playback Switch&quot;,  &quot;Line Mixer&quot;},
{&quot;Speaker Mixer&quot;, &quot;PCM Playback Switch&quot;,     &quot;AC97 Mixer&quot;},
{&quot;Speaker Mixer&quot;, &quot;MonoIn Playback Switch&quot;,  &quot;Mono In&quot;},

/* mono mixer */
{&quot;Mono Mixer&quot;, &quot;Beep Playback Switch&quot;,    &quot;PCBEEP&quot;},
{&quot;Mono Mixer&quot;, &quot;Voice Playback Switch&quot;,   &quot;Voice DAC&quot;},
{&quot;Mono Mixer&quot;, &quot;Aux Playback Switch&quot;,     &quot;Aux DAC&quot;},
{&quot;Mono Mixer&quot;, &quot;Bypass Playback Switch&quot;,  &quot;Line Mixer&quot;},
{&quot;Mono Mixer&quot;, &quot;PCM Playback Switch&quot;,     &quot;AC97 Mixer&quot;},
{&quot;Mono Mixer&quot;, &quot;Mic 1 Sidetone Switch&quot;, &quot;Mic A PGA&quot;},
{&quot;Mono Mixer&quot;, &quot;Mic 2 Sidetone Switch&quot;, &quot;Mic B PGA&quot;},
{&quot;Mono Mixer&quot;, NULL,  &quot;Capture Mono Mux&quot;},

/* DAC inv mux 1 */
{&quot;DAC Inv Mux 1&quot;, &quot;Mono&quot;, &quot;Mono Mixer&quot;},
{&quot;DAC Inv Mux 1&quot;, &quot;Speaker&quot;, &quot;Speaker Mixer&quot;},
{&quot;DAC Inv Mux 1&quot;, &quot;Left Headphone&quot;, &quot;Left HP Mixer&quot;},
{&quot;DAC Inv Mux 1&quot;, &quot;Right Headphone&quot;, &quot;Right HP Mixer&quot;},
{&quot;DAC Inv Mux 1&quot;, &quot;Headphone Mono&quot;, &quot;HP Mixer&quot;},

/* DAC inv mux 2 */
{&quot;DAC Inv Mux 2&quot;, &quot;Mono&quot;, &quot;Mono Mixer&quot;},
{&quot;DAC Inv Mux 2&quot;, &quot;Speaker&quot;, &quot;Speaker Mixer&quot;},
{&quot;DAC Inv Mux 2&quot;, &quot;Left Headphone&quot;, &quot;Left HP Mixer&quot;},
{&quot;DAC Inv Mux 2&quot;, &quot;Right Headphone&quot;, &quot;Right HP Mixer&quot;},
{&quot;DAC Inv Mux 2&quot;, &quot;Headphone Mono&quot;, &quot;HP Mixer&quot;},

/* headphone left mux */
{&quot;Left Headphone Out Mux&quot;, &quot;Headphone&quot;, &quot;Left HP Mixer&quot;},

/* headphone right mux */
{&quot;Right Headphone Out Mux&quot;, &quot;Headphone&quot;, &quot;Right HP Mixer&quot;},

/* speaker left mux */
{&quot;Left Speaker Out Mux&quot;, &quot;Headphone&quot;, &quot;Left HP Mixer&quot;},
{&quot;Left Speaker Out Mux&quot;, &quot;Speaker&quot;, &quot;Speaker Mixer&quot;},
{&quot;Left Speaker Out Mux&quot;, &quot;Inv&quot;, &quot;DAC Inv Mux 1&quot;},

/* speaker right mux */
{&quot;Right Speaker Out Mux&quot;, &quot;Headphone&quot;, &quot;Right HP Mixer&quot;},
{&quot;Right Speaker Out Mux&quot;, &quot;Speaker&quot;, &quot;Speaker Mixer&quot;},
{&quot;Right Speaker Out Mux&quot;, &quot;Inv&quot;, &quot;DAC Inv Mux 2&quot;},

/* mono mux */
{&quot;Mono Out Mux&quot;, &quot;Mono&quot;, &quot;Mono Mixer&quot;},
{&quot;Mono Out Mux&quot;, &quot;Inv&quot;, &quot;DAC Inv Mux 1&quot;},

/* out 3 mux */
{&quot;Out 3 Mux&quot;, &quot;Inv 1&quot;, &quot;DAC Inv Mux 1&quot;},

/* out 4 mux */
{&quot;Out 4 Mux&quot;, &quot;Inv 2&quot;, &quot;DAC Inv Mux 2&quot;},

/* output pga */
{&quot;HPL&quot;, NULL, &quot;Left Headphone&quot;},
{&quot;Left Headphone&quot;, NULL, &quot;Left Headphone Out Mux&quot;},
{&quot;HPR&quot;, NULL, &quot;Right Headphone&quot;},
{&quot;Right Headphone&quot;, NULL, &quot;Right Headphone Out Mux&quot;},
{&quot;OUT3&quot;, NULL, &quot;Out 3&quot;},
{&quot;Out 3&quot;, NULL, &quot;Out 3 Mux&quot;},
{&quot;OUT4&quot;, NULL, &quot;Out 4&quot;},
{&quot;Out 4&quot;, NULL, &quot;Out 4 Mux&quot;},
{&quot;SPKL&quot;, NULL, &quot;Left Speaker&quot;},
{&quot;Left Speaker&quot;, NULL, &quot;Left Speaker Out Mux&quot;},
{&quot;SPKR&quot;, NULL, &quot;Right Speaker&quot;},
{&quot;Right Speaker&quot;, NULL, &quot;Right Speaker Out Mux&quot;},
{&quot;MONO&quot;, NULL, &quot;Mono Out&quot;},
{&quot;Mono Out&quot;, NULL, &quot;Mono Out Mux&quot;},

/* input pga */
{&quot;Left Line In&quot;, NULL, &quot;LINEL&quot;},
{&quot;Right Line In&quot;, NULL, &quot;LINER&quot;},
{&quot;Mono In&quot;, NULL, &quot;MONOIN&quot;},
{&quot;Mic A PGA&quot;, NULL, &quot;Mic A Pre Amp&quot;},
{&quot;Mic B PGA&quot;, NULL, &quot;Mic B Pre Amp&quot;},

/* left capture select */
{&quot;Left Capture Source&quot;, &quot;Mic 1&quot;, &quot;Mic A Pre Amp&quot;},
{&quot;Left Capture Source&quot;, &quot;Mic 2&quot;, &quot;Mic B Pre Amp&quot;},
{&quot;Left Capture Source&quot;, &quot;Line&quot;, &quot;LINEL&quot;},
{&quot;Left Capture Source&quot;, &quot;Mono In&quot;, &quot;MONOIN&quot;},
{&quot;Left Capture Source&quot;, &quot;Headphone&quot;, &quot;Left HP Mixer&quot;},
{&quot;Left Capture Source&quot;, &quot;Speaker&quot;, &quot;Speaker Mixer&quot;},
{&quot;Left Capture Source&quot;, &quot;Mono Out&quot;, &quot;Mono Mixer&quot;},

/* right capture select */
{&quot;Right Capture Source&quot;, &quot;Mic 1&quot;, &quot;Mic A Pre Amp&quot;},
{&quot;Right Capture Source&quot;, &quot;Mic 2&quot;, &quot;Mic B Pre Amp&quot;},
{&quot;Right Capture Source&quot;, &quot;Line&quot;, &quot;LINER&quot;},
{&quot;Right Capture Source&quot;, &quot;Mono In&quot;, &quot;MONOIN&quot;},
{&quot;Right Capture Source&quot;, &quot;Headphone&quot;, &quot;Right HP Mixer&quot;},
{&quot;Right Capture Source&quot;, &quot;Speaker&quot;, &quot;Speaker Mixer&quot;},
{&quot;Right Capture Source&quot;, &quot;Mono Out&quot;, &quot;Mono Mixer&quot;},

/* left ADC */
{&quot;Left ADC&quot;, NULL, &quot;Left Capture Source&quot;},
{&quot;Left Voice ADC&quot;, NULL, &quot;Left ADC&quot;},
{&quot;Left HiFi ADC&quot;, NULL, &quot;Left ADC&quot;},

/* right ADC */
{&quot;Right ADC&quot;, NULL, &quot;Right Capture Source&quot;},
{&quot;Right Voice ADC&quot;, NULL, &quot;Right ADC&quot;},
{&quot;Right HiFi ADC&quot;, NULL, &quot;Right ADC&quot;},

/* mic */
{&quot;Mic A Pre Amp&quot;, NULL, &quot;Mic A Source&quot;},
{&quot;Mic A Source&quot;, &quot;Mic 1&quot;, &quot;MIC1&quot;},
{&quot;Mic A Source&quot;, &quot;Mic 2 A&quot;, &quot;MIC2A&quot;},
{&quot;Mic A Source&quot;, &quot;Mic 2 B&quot;, &quot;Mic B Source&quot;},
{&quot;Mic B Pre Amp&quot;, &quot;MPB&quot;, &quot;Mic B Source&quot;},
{&quot;Mic B Source&quot;, NULL, &quot;MIC2B&quot;},

/* headphone capture */
{&quot;Capture Headphone Mux&quot;, &quot;Stereo&quot;, &quot;Capture Mixer&quot;},
{&quot;Capture Headphone Mux&quot;, &quot;Left&quot;, &quot;Left Capture Source&quot;},
{&quot;Capture Headphone Mux&quot;, &quot;Right&quot;, &quot;Right Capture Source&quot;},

/* mono capture */
{&quot;Capture Mono Mux&quot;, &quot;Stereo&quot;, &quot;Capture Mixer&quot;},
{&quot;Capture Mono Mux&quot;, &quot;Left&quot;, &quot;Left Capture Source&quot;},
{&quot;Capture Mono Mux&quot;, &quot;Right&quot;, &quot;Right Capture Source&quot;},
</code></pre><p>};<br>route数量很多。挑几个代表性的来分析下。<br>{“Speaker Mixer”, “Beep Playback Switch”,    “PCBEEP”},<br>也就是source源头是PCBEEP，control是Beep Playback Switch，sink接收方是Speaker Mixer<br>Speaker Mixer的定义是：（类型是snd_soc_dapm_widget）<br>static const struct snd_soc_dapm_widget wm9713_dapm_widgets[] = {<br>…<br>SND_SOC_DAPM_MIXER(“Speaker Mixer”, AC97_EXTENDED_MID, 1, 1,<br>    &amp;wm9713_speaker_mixer_controls[0],<br>    ARRAY_SIZE(wm9713_speaker_mixer_controls)),<br>…<br>}<br>Beep Playback Switch的定义是：（类型是snd_kcontrol_new）<br>static const struct snd_kcontrol_new wm9713_hpl_mixer_controls[] = {<br>…<br>SOC_DAPM_SINGLE(“Beep Playback Switch”, AC97_AUX, 11, 1, 1),<br>…<br>}<br>PCBEEP的定义是：（类型是snd_soc_dapm_widget）<br>static const struct snd_soc_dapm_widget wm9713_dapm_widgets[] = {<br>…<br>SND_SOC_DAPM_INPUT(“PCBEEP”),<br>…<br>}<br>route中三方的类型是：snd_soc_dapm_widget—snd_kcontrol_new—snd_soc_dapm_widget<br>然后我们细看下sink,source,control的定义。</p>
<p>source源头：（类型是snd_soc_dapm_widget）<br>SND_SOC_DAPM_INPUT(“PCBEEP”),<br>SND_SOC_DAPM_INPUT用来定义codec芯片的输入脚，在wm9713.pdf中，page2就提到一个音频输入脚，就叫PCBEEP。也就是page4的pin19<br>看下这个宏的定义：</p>
<p>#define SND_SOC_DAPM_INPUT(wname) \<br>{    .id = snd_soc_dapm_input, .name = wname, .kcontrol_news = NULL, \<br>    .num_kcontrols = 0, .reg = SND_SOC_NOPM }<br>可以看到，这个widget，不涉及电源管理（SND_SOC_NOPM），也不涉及snd_kcontrol_new(kcontrol_news作为widget的成员是NULL)。就是一个抽象的概念（输入脚）。</p>
<p>control控制：（类型是snd_kcontrol_new）<br>SOC_DAPM_SINGLE(“Beep Playback Switch”, AC97_AUX, 11, 1, 1),<br>乍一看，其实和SOC_SINGLE很像。回顾下：</p>
<p>#define SOC_SINGLE(xname, reg, shift, max, invert) \<br>{    .iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, \<br>    .info = snd_soc_info_volsw, .get = snd_soc_get_volsw,\<br>    .put = snd_soc_put_volsw, \<br>    .private_value = SOC_SINGLE_VALUE(reg, shift, max, invert, 0) }<br>发现这俩兄弟入参是一模一样的。</p>
<p>#define SOC_DAPM_SINGLE(xname, reg, shift, max, invert) \<br>{    .iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, \<br>    .info = snd_soc_info_volsw, \<br>    .get = snd_soc_dapm_get_volsw, .put = snd_soc_dapm_put_volsw, \<br>    .private_value = SOC_SINGLE_VALUE(reg, shift, max, invert, 0) }<br>所以用在route里面的snd_kcontrol_new,和普通意义上的snd_kcontrol_new，有啥不同呢？<br>相比普通的kcontrol控件，dapm的kcontrol控件只是把get，put回调函数换掉了。<br>dapm kcontrol的put回调函数不仅仅会更新控件本身的状态，他还会把这种变化传递到相邻的dapm kcontrol，<br>相邻的dapm kcontrol又会传递这个变化到他自己相邻的dapm kcontrol，知道音频路径的末端，通过这种机制，<br>只要改变其中一个widget的连接状态，与之相关的所有widget都会被扫描并测试一下自身是否还在有效的音频路径中，<br>从而可以动态地改变自身的电源状态，这就是dapm的精髓所在。<br>但单纯从使用角度来说，SOC_DAPM_SINGLE和SOC_SINGLE是一样的，因为入参一样，定义了一个开关量。<br>回到wm9713.pdf，AC97_AUX寄存器的定义在page91，bit11的作用是Mutes PCBEEP to speaker mixer path。<br>可以看到Beep Playback Switch真的是PCBEEP到speaker mixer的通路开关寄存器位。</p>
<p>sink接收：（类型是snd_soc_dapm_widget）<br>SND_SOC_DAPM_MIXER(“Speaker Mixer”, AC97_EXTENDED_MID, 1, 1,<br>    &amp;wm9713_speaker_mixer_controls[0],<br>    ARRAY_SIZE(wm9713_speaker_mixer_controls)),<br>接收端的widget定义就比较复杂了。</p>
<p>#define SND_SOC_DAPM_MIXER(wname, wreg, wshift, winvert, \<br>     wcontrols, wncontrols)\<br>{    .id = snd_soc_dapm_mixer, .name = wname, \<br>    SND_SOC_DAPM_INIT_REG_VAL(wreg, wshift, winvert), \<br>    .kcontrol_news = wcontrols, .num_kcontrols = wncontrols}<br>这个widget的入参，分两部分看。<br>前半部分：wname, wreg, wshift, winvert,<br>后半部分：wcontrols, wncontrols<br>前半部分实际的是入参是AC97_EXTENDED_MID=0x3C，对应wm9713.c的page96的3Ch寄存器。<br>其bit1定义是Disables speaker mixer，可以看到这个是sink端widget自己本身的开关量，即关闭sink或者打开sink。<br>后半部分的入参是wm9713_speaker_mixer_controls[]<br>所谓的wcontrols其实就是snd_kcontrol_new的数组。在这个数组中，需要包含这个sink可能会用到的control。<br>/<em> Speaker Mixer </em>/<br>static const struct snd_kcontrol_new wm9713_speaker_mixer_controls[] = {<br>SOC_DAPM_SINGLE(“Beep Playback Switch”, AC97_AUX, 11, 1, 1),<br>SOC_DAPM_SINGLE(“Voice Playback Switch”, AC97_PCM, 11, 1, 1),<br>SOC_DAPM_SINGLE(“Aux Playback Switch”, AC97_REC_SEL, 11, 1, 1),<br>SOC_DAPM_SINGLE(“PCM Playback Switch”, AC97_PHONE, 14, 1, 1),<br>SOC_DAPM_SINGLE(“MonoIn Playback Switch”, AC97_MASTER_TONE, 14, 1, 1),<br>SOC_DAPM_SINGLE(“Bypass Playback Switch”, AC97_PC_BEEP, 14, 1, 1),<br>};<br>看这个wm9713_speaker_mixer_controls[]，就是所有有可能输入到speaker mixer的开关量，这里都需要列举。当然包含上面举例的Beep Playback Switch。<br>所以回到和speaker mixer这个接收方有关的route，其实有这么多：<br>    /<em> speaker mixer </em>/<br>    {“Speaker Mixer”, “Beep Playback Switch”,    “PCBEEP”},<br>    {“Speaker Mixer”, “Voice Playback Switch”,   “Voice DAC”},<br>    {“Speaker Mixer”, “Aux Playback Switch”,     “Aux DAC”},<br>    {“Speaker Mixer”, “Bypass Playback Switch”,  “Line Mixer”},<br>    {“Speaker Mixer”, “PCM Playback Switch”,     “AC97 Mixer”},<br>    {“Speaker Mixer”, “MonoIn Playback Switch”,  “Mono In”},</p>
<p>现在顺藤摸瓜， 看看一条完成的音频通路是啥样的？在wm9713_audio_map[]中抽取一条完整的通路：<br>{“Speaker Mixer”, “Beep Playback Switch”,    “PCBEEP”},<br>{“DAC Inv Mux 1”, “Speaker”, “Speaker Mixer”},<br>{“Left Speaker Out Mux”, “Inv”, “DAC Inv Mux 1”},<br>{“Left Speaker”, NULL, “Left Speaker Out Mux”},<br>从输入到最后输出，可以看到整条通路（称为comlete path）：<br>PCBEEP-&gt;Beep Playback Switch-&gt;Speaker Mixer-&gt;Speaker-&gt;DAC Inv Mux 1-&gt;Inv-&gt;Left Speaker Out Mux-&gt;Left Speaker</p>
<p>这里涉及的所有sink,source,control如下：<br>{“Speaker Mixer”, “Beep Playback Switch”,    “PCBEEP”},<br>    source:<br>    SND_SOC_DAPM_INPUT(“PCBEEP”),<br>    control:<br>    SOC_DAPM_SINGLE(“Beep Playback Switch”, AC97_AUX, 11, 1, 1),<br>    sink:<br>    SND_SOC_DAPM_MIXER(“Speaker Mixer”, AC97_EXTENDED_MID, 1, 1,&amp;wm9713_speaker_mixer_controls[0],ARRAY_SIZE(wm9713_speaker_mixer_controls)),<br>{“DAC Inv Mux 1”, “Speaker”, “Speaker Mixer”},<br>    source:<br>    SND_SOC_DAPM_MIXER(“Speaker Mixer”, AC97_EXTENDED_MID, 1, 1,&amp;wm9713_speaker_mixer_controls[0],ARRAY_SIZE(wm9713_speaker_mixer_controls)),<br>    control:<br>    “Speaker”<br>    sink:<br>    SND_SOC_DAPM_MUX(“DAC Inv Mux 1”, SND_SOC_NOPM, 0, 0,&amp;wm9713_dac_inv1_mux_controls),<br>        此处DAC Inv Mux 1可能的controls，是wm9713_dac_inv1_mux_controls也就是：SOC_DAPM_ENUM(“Route”, wm9713_enum[14]);<br>        而wm9713_enum[14]是SOC_ENUM_SINGLE(AC97_REC_GAIN_MIC, 13, 8, wm9713_dac_inv),<br>        static const char <em>wm9713_dac_inv[] =<br>        {“Off”, “Mono”, “Speaker”, “Left Headphone”, “Right Headphone”,<br>        “Headphone Mono”, “NC”, “Vmid”};<br>        说白了就是又回到之前讲kcontrol时候的enum类型的控件，实际可以在wm9713_dac_inv[]里面选一个作为kcontrol的值。<br>        上面的control选了”Speaker”，这个control是个固定的选择，不像”Beep Playback Switch”可以开关。<br>        只是说明，作为接收端”DAC Inv Mux 1”，其mux的过程中，使用的是”Speaker”这路作为他固定的mux选择（这种选择作为control存在）。<br>{“Left Speaker Out Mux”, “Inv”, “DAC Inv Mux 1”},<br>    source:<br>    SND_SOC_DAPM_MUX(“DAC Inv Mux 1”, SND_SOC_NOPM, 0, 0,&amp;wm9713_dac_inv1_mux_controls),<br>    control:<br>    “Inv”<br>    sink:<br>    SND_SOC_DAPM_MUX(“Left Speaker Out Mux”, SND_SOC_NOPM, 0, 0,&amp;wm9713_hp_spkl_mux_controls),<br>    此处Left Speaker Out Mux可能的controls，是wm9713_hp_spkl_mux_controls也就是SOC_DAPM_ENUM(“Route”, wm9713_enum[8]);<br>    而wm9713_enum[8]是SOC_ENUM_SINGLE(AC97_REC_GAIN, 11, 8, wm9713_spk_pga), /</em> speaker left input select 8 <em>/<br>    static const char </em>wm9713_spk_pga[] =<br>    {“Vmid”, “Zh”, “Headphone”, “Speaker”, “Inv”, “Headphone Vmid”,<br>    “Speaker Vmid”, “Inv Vmid”};<br>    所以这里类似上面的一个route，其control固定为”Inv”。<br>{“Left Speaker”, NULL, “Left Speaker Out Mux”},<br>    source:<br>    SND_SOC_DAPM_MUX(“Left Speaker Out Mux”, SND_SOC_NOPM, 0, 0,&amp;wm9713_hp_spkl_mux_controls),<br>    control:<br>    无<br>    sink:<br>    SND_SOC_DAPM_PGA(“Left Speaker”, AC97_EXTENDED_MSTATUS, 8, 1, NULL, 0),<br>    这是一种PGA类型的widget，其实也是个开关量。wm9713.pdf的page96定义：AC97_EXTENDED_MSTATUS=0x3E寄存器，bit8是Disables SPKL output PGA</p>
<p>现在回到之前提过的，自动开关电源的机制。<br>在一个comlete path中，每个一条comlete path每个path的connet都标记为connect=1，并且存在APP使用声卡，其才会去设置所有的寄存器。<br>为啥？<br>例如control是SOC_DAPM_SINGLE</p>
<p>#define SOC_DAPM_SINGLE(xname, reg, shift, max, invert) \<br>{    .iface = SNDRV_CTL_ELEM_IFACE_MIXER, .name = xname, \<br>    .info = snd_soc_info_volsw, \<br>    .get = snd_soc_dapm_get_volsw, .put = snd_soc_dapm_put_volsw, \<br>    .private_value = SOC_SINGLE_VALUE(reg, shift, max, invert, 0) }<br>以其中的snd_soc_dapm_put_volsw打开看：<br>snd_soc_dapm_put_volsw()-&gt;soc_dapm_mixer_update_power()-&gt;dapm_power_widgets()</p>
<p>connect究竟是哪里赋值的？如何设定的complete path??        &lt;&lt;&lt;—i’m here<br>1.sink，NULL，soure：其表示他们肯定是连接在一起的，由他们构造出来的path，其成员connect一直为1。<br>例如：{“IN1P”, NULL, “LDO”},</p>
<p>具体到linux的环境中，音频通路的动态切换，是怎么和这里定义的route联系起来的？    参考    笔记-音频通路配置.txt</p>
<p>tinymix可以看到kcontrol的状态，和route的通断情况。如下：<br>ctl     type    num     name                                     value<br>0       ENUM    1       DL1 Equalizer                            Flat response<br>1       ENUM    1       DL2 Left Equalizer                       450Hz High-pass<br>2       ENUM    1       DL2 Right Equalizer                      450Hz High-pass<br>3       ENUM    1       Sidetone Equalizer                       Flat response<br>4       ENUM    1       AMIC Equalizer                           High-pass 0dB<br>5       ENUM    1       DMIC Equalizer                           High-pass 0dB<br>6       INT     1       DL1 Media Playback Volume                120<br>7       INT     1       DL1 Tones Playback Volume                0<br>8       INT     1       DL1 Voice Playback Volume                120<br>9       INT     1       DL1 Capture Playback Volume              0<br>10      INT     1       DL2 Media Playback Volume                120<br>11      INT     1       DL2 Tones Playback Volume                0<br>12      INT     1       DL2 Voice Playback Volume                120<br>13      INT     1       DL2 Capture Playback Volume              0<br>14      INT     1       VXREC Media Volume                       0<br>15      INT     1       VXREC Tones Volume                       0<br>16      INT     1       VXREC Voice DL Volume                    0<br>17      INT     1       VXREC Voice UL Volume                    0<br>18      INT     1       AUDUL Media Volume                       0<br>19      INT     1       AUDUL Tones Volume                       0<br>20      INT     1       AUDUL Voice UL Volume                    120<br>21      INT     1       AUDUL Voice DL Volume                    0<br>22      INT     1       SDT UL Volume                            103<br>23      INT     1       SDT DL Volume                            120<br>24      INT     2       DMIC1 UL Volume                          120 120<br>25      INT     2       DMIC2 UL Volume                          120 120<br>26      INT     2       DMIC3 UL Volume                          120 120<br>27      INT     2       AMIC UL Volume                           120 120<br>28      INT     2       BT UL Volume                             120 120<br>29      BOOL    1       DL1 Mono Mixer                           Off<br>30      BOOL    1       DL2 Mono Mixer                           On<br>31      BOOL    1       AUDUL Mono Mixer                         Off<br>32      BOOL    1       DL1 MM_EXT Switch                        Off<br>33      BOOL    1       DL1 BT_VX Switch                         Off<br>34      BOOL    1       DL1 PDM Switch                           Off<br>35      BOOL    1       Sidetone Mixer Capture                   Off<br>36      BOOL    1       Sidetone Mixer Playback                  On<br>37      BOOL    1       Capture Mixer Tones                      Off<br>38      BOOL    1       Capture Mixer Voice Playback             Off<br>39      BOOL    1       Capture Mixer Voice Capture              Off<br>40      BOOL    1       Capture Mixer Media Playback             Off<br>41      BOOL    1       Voice Capture Mixer Tones Playback       Off<br>42      BOOL    1       Voice Capture Mixer Media Playback       Off<br>43      BOOL    1       Voice Capture Mixer Capture              Off<br>44      BOOL    1       DL2 Mixer Tones                          Off<br>45      BOOL    1       DL2 Mixer Voice                          Off<br>46      BOOL    1       DL2 Mixer Capture                        Off<br>47      BOOL    1       DL2 Mixer Multimedia                     On<br>48      BOOL    1       DL1 Mixer Tones                          Off<br>49      BOOL    1       DL1 Mixer Voice                          Off<br>50      BOOL    1       DL1 Mixer Capture                        Off<br>51      BOOL    1       DL1 Mixer Multimedia                     Off</p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/07/12/ALSA名词解释/" rel="next" title="ALSA名词解释">
                <i class="fa fa-chevron-left"></i> ALSA名词解释
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/07/12/Android-audio-overview/" rel="prev" title="Android audio overview">
                Android audio overview <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Semiyd</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">241</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">130</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Semiyd</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
